<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="importmap">
      {
        "imports": {
          "@jsxImportSource": "https://esm.sh/preact@10.19.2",
          "preact": "https://esm.sh/preact@10.19.2",
          "preact/": "https://esm.sh/preact@10.19.2/"
        }
      }
    </script>
    <script type="module" src="https://esm.sh/run"></script>
  </head>
  <body>
    <script type="text/babel">
      // https://github.com/youpy/yea
      import { amen, example } from "./main.js";
      import { render } from "preact";
      import { useState } from "preact/hooks";

      const App = () => {
        const [stop, setStop] = useState(null);
        const toggle = () => {
          if (stop) {
            stop.fn();

            setStop(null);
          } else {
            const [stop] = amen(example);

            setStop({ fn: stop });
          }
        };

        return (
          <button onClick={() => toggle()}>{stop ? "stop" : "start"}</button>
        );
      };

      render(<App />, document.body);
    </script>
  </body>
</html>
